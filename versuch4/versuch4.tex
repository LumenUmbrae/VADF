\documentclass[Protokollheft.tex]{subfiles}
\begin{document}
\chapter{Elektrostatik und Magnetostatik 1}
%--------------- Start Vorbereitungsaufgaben ---------------
\section{Vorbereitungsaufgaben}

{\subsection{Elektrostatik}}

% --> Aufgabe
\begin{framed}
	\noindent \textbf{1.} An welchen Stellen im Gitter sind jeweils die elektrischen
Spannungen $\efit$, die Potentiale $\varphi$, die Ladungen $q$ und die
dielektrischen Flüsse $\dfit$ in der Elektrostatik allokiert?\label{exer:allocateElectrical}
\end{framed}

\emph{Fügen Sie hier Ihre Lösung ein}

% --> Aufgabe
\begin{framed}
	\noindent \textbf{2.} Machen Sie sich anhand einer lokalen \emph{zweidimensionalen}
Betrachtung die Beziehung zwischen der Ladung $q_n$ einer dualen Zelle $n$ und
den assoziierten Potentialen klar. Skizzieren
Sie dazu zunächst das lokale Gauß'sche Gesetz für eine duale
Zelle. Nutzen Sie dabei anstatt der auftretenden Feldkomponenten 
die diskreten Potentialwerte, die Sie durch Gradientenbildung aus den 
Feldkomponenten erhalten (siehe Gleichung (4.11)).\\
Betrachten Sie dazu zunächst ein äquidistantes Gitter mit
Schrittweite $\Delta s$ und eine homogene Materialverteilung mit der
Permittivität $\eps_0$. Tragen Sie den entstehenden
"`Differenzenstern"' (Differenzen der beteiligten Potentialwerte,
die mit den Kopplungskoeffizienten gewichtet werden) in Ihre
Skizze ein.\label{exer:diffStar}
\end{framed}

\emph{Fügen Sie hier Ihre Lösung ein}

% --> Aufgabe
\begin{framed}
	\noindent \textbf{3.} Betrachten Sie nun den Fall nichtäquidistanter Gitter
und inhomogener Materialverteilung, also die Werte der Materialmatrix im
Differenzenstern. Veranschaulichen Sie sich die Struktur der Systemmatrix $\mathbf{A}$ mit Hilfe einer Skizze der Bandstruktur.\label{exer:bandsOfSystemMat}
\end{framed}

\emph{Fügen Sie hier Ihre Lösung ein}

% --> Aufgabe
\begin{framed}
	\noindent \textbf{4.} Gegeben sei ein zweidimensionales Rechengebiet mit den
Abmessungen\footnote{Alle Größen hier und im Folgenden in SI-Einheiten.} $0.6\times 1.2$ mit        
dem Koordinatenursprung bei $(0,0)$. Es seien drei Punktladungen im
Rechengebiet mit $q_1=q_0$ am Punkt $(0.3,0.2)$,  $q_2=q_0/2$ bei
$(0.6,0.4)$, und  $q_3=q_0/4$ bei $(0.9,0.2)$ gegeben.\\
Berechnen Sie die Größe und den Ort des Ladungsschwerpunkts $q_{\text{S}}$. Das
Rechengebiet sei homogen mit $\eps_0$ gefüllt und äquidistant mit
$3 \times 4$ Gitterzellen diskretisiert. Berechnen Sie außerdem die
Potentiale der Randknoten so, dass die Problemstellung mit einer
offenen Berandung versehen ist.\label{exer:averagePointCharges}
\end{framed}

\emph{Fügen Sie hier Ihre Lösung ein}

% --> Aufgabe
\begin{framed}
	\noindent \textbf{5.} Berechnen Sie, wenn möglich, die Kapazitäten folgender Anordnungen mithilfe von Kondensatorschaltungen. Die Abmessung soll für alle Anordnungen mit $1\times1\times1$     
angenommen werden. Dabei befinden sich die Elektroden bei $y = 0$ und $y = 1$. Wie kann Anordnung e) geändert werden, damit sie mit einer Kondensatorschaltung berechnet werden kann?
\begin{enumerate}[label=\alph*)]
\item Homogen mit Permittivität $\eps_\text{r}=1$.
\item Äquidistant längsgeschichtet mit Permittivitäten $\eps_{\text{r}1}=1$ und $\eps_{\text{r}2}=2$                    (Reihenschaltung).
\item Äquidistant quergeschichtet mit Permittivitäten $\eps_{\text{r}1}=1$ und $\eps_{\text{r}2}=2$                     (Parallelschaltung).
\item Längs- und quergeschichtet mit Permittivitäten $\eps_{\text{r}1}=1$,                      
$\eps_{\text{r}2}=2$, $\eps_{\text{r}3}=3$ und $\eps_{\text{r}4}=4$ (Reihenschaltung von Parallelschaltungen bzw. Parallelschaltung von Reihenschaltungen).
\item Homogen gefüllter Kondensator ($\eps_\text{r}=1$) mit Zick-Zack-förmiger oberer Platte. Ausgehend von einem homogenen Plattenkondensator soll die Geometrie der oberen Platte durch das Einbringen eines metallischen Quaders mit den Punkten $(0,0.5,0)$ und $(0.5,1,1)$ modelliert werden.
\end{enumerate}
\label{exer:calcCapsAnalytical}
\end{framed}

\emph{Fügen Sie hier Ihre Lösung ein}

\newpage
%
{\subsection{Skalare Magnetostatik}}

% --> Aufgabe
\begin{framed}
	\noindent \textbf{6.} An welcher Stelle im Gitter müssen die Komponenten des Gitterstroms
$\jfit$ allokiert werden (bei gegebenem Ansatz des magnetischen Skalarpotentials)?\label{exer:allocateCurrent}
\end{framed}
\noindent
Da die diskrete magnetische Feldstärke $\hfit$ auf den primären Kanten definiert ist, ist die diskrete Stromdichte $\jfit$ als über die Divergenzmatrix $\mathbf{S}$ mit $\mathbf{S}\hfit = \jfit$, verbundene Größe auf den primären Flächen definiert. 


% --> Aufgabe
\begin{framed}
	\noindent \textbf{7.} Berechnen Sie analytisch das magnetische Feld um einen unendlich
ausgedehnten Linienleiter und skizzieren Sie die zu erwartende
Feldverteilung.\label{exer:HfieldAroundLineConductor}
\end{framed}
\noindent
Aus dem amperischen Gesetz für die Magnetostatik
\begin{equation}
	\label{eq:ampere}
	\int_{\partial A} \vec{H} \cdot \text{d}\vec{s} = \int_A \vec{J} \cdot \text{d} \vec{A} 
\end{equation}
ergibt sich durch Transformation der linken Seite in Zylinderkoordinaten und auflösen der rechten Seite
\begin{equation*}
	\int_{0}^{2\pi} \varrho\ \vec{H} \cdot \vec{e_\varphi}   \ \text{d} \varphi = I.
\end{equation*}
Durch auflösen des Integrales, umstellen nach $H_\varphi$ und einsetzen in das Materialgesetz $\vec{H} = \mu \vec{B}$  ergibt sich somit
\begin{equation}
	\label{eq:bLeiter}
	B_\varphi = \frac{I}{2\mu \pi \varrho} %  an????
\end{equation}


% --> Aufgabe
\begin{framed}
	\noindent \textbf{8.} Wie können die Dirichlet- und die Neumann- Randbedingung physikalisch gedeutet werden, wenn sie in der Magnetostatik auf das magnetische Skalarpotential angewandt werden?\label{exer:bndCondMagScalarPot}
\end{framed}
\noindent
Bei einer physikalischen Deutung der Dirichlet-Randbedingungen lassen sich diese als Übergang zu einem Material perfekter elektrischer Leitfähigkeit interpretieren, das das Magnetfeld gänzlich aus sich hinausdrängt. \\
Neuman-Randbedingungen lassen sich als perfekter magnetischer Leiter an den Ränder interpretieren, der alle Feldlinien in sich hineinzieht, weshalb die Felder senkrecht in den Rand übergehen.  

% --> Aufgabe
\begin{framed}
	\noindent \textbf{9.} Das Problem eines unendlich langen Leiters ist ein
offenes 2D-Problem und müsste durch eine offene
Randbedingung in der FIT modelliert werden. Wenn das
Rechengebiet hinreichend groß ist, kann ohne großen
Genauigkeitsverlust für die Felder im Inneren des Rechengebiets
auf die komplizierte Implementierung eines offenen Randes
verzichtet werden. Welche Randbedingung eignet sich hierfür besser? (Neumann ($H_{\text{n}}=0$) oder Dirichlet ($\vec{H}_{\text{t}}=0$))?\label{exer:boundCondInfiniteConductor}
\end{framed}
\noindent
Für die Approximation eines Linienleiters im freien Raum durch setzen von Rändern in hinreichend großer Entfernung eignen sich Dirichlet- besser als Neumann-Randbedingungen.\\
Dies ist darin begründet das es sich beim approximierten Feld, wie in Abb. \ref{label} zu sehen, um ein Zylindrisches Feld handelt. Da die bei Dirichletrandbedingungen die tangentiale Komponente $\vec{H_t}$ des Feldes am Rand verschwindet und nur die Normalendkomponente auftritt, verlaufen Feldvektoren des Simulierten Feldes schon in weiten Teilen in eine ähnliche Richtung wie an den Grenzflächen und werden durch diese nur im geringen Maße, vor allem an den Ecken, gestört.   

%TODO

\section{Aufgaben während der Praktikumssitzung}

{\subsection{Elektrostatik}}

Kern dieses Abschnitts bildet die Implementierung eines Solvers für elektrostatische
Probleme. Anhand der Kondensatoranordnungen aus der Vorbereitung können die
Routinen mit analytischen Berechnungen verglichen und das Konvergenzverhalten
untersucht werden. Der Kondensator mit Knick dient darüber hinaus als Beispiel
für ein analytisch nicht lösbares Problem.

% --> Aufgabe
\begin{framed}
	\noindent \textbf{1.} Vervollständigen Sie die in \lstinline{solveES.m} vorgegebene Funktion
\begin{align}
\lstinline{[phi, ebow, dbow, relRes] = solveES(msh, eps, pots, q, bc)} \; ,
\end{align}
welche einem allgemeinen Elektrostatik-Solver entspricht. \lstinline{msh} ist hierbei das Rechengitter, \lstinline{eps} die Permittivität, \lstinline{pots} die gesetzten Potentiale für jeden Gitterpunkt (nicht bekannte Potentiale sind mit dem Wert \lstinline{NaN} in diesem Vektor gekennzeichnet), \lstinline{q} die vorgegebenen Ladungen und \lstinline{bc} die vorgegebenen Randbedingungen. \lstinline{phi}, \lstinline{ebow} und \lstinline{dbow} sind die integralen Feldgrößen und \lstinline{relRes} ist ein Vektor mit den relativen Residuen des Solvers in jedem Iterationsschritt.\\
\ \\
{\textbf{Hinweis:}} Für die Implementierung werden Ihnen einige Routinen vorgegeben
(zum Teil handelt es sich um optimierte Funktionen aus vergangenen Versuchen), welche auf den nächsten Seiten beschrieben sind. Verwenden Sie diese so oft wie möglich.\label{exer:solveES}
\end{framed}

\emph{Fügen Sie hier Ihre Lösung ein}

% --> Aufgabe
\begin{framed}
	\noindent \textbf{2.} Schreiben Sie eine Methode
\begin{align}
\lstinline{cap = calcCap(msh, ebow, dbow)} \; ,
\end{align}
die die Kapazität \lstinline{cap} berechnet und zurück gibt. Verwenden Sie hierzu die vorgegebenen Methoden \lstinline{intEdge} und
\lstinline{intSurf}.\label{exer:calcCap}
\end{framed}

\emph{Fügen Sie hier Ihre Lösung ein}

% --> Aufgabe
\begin{framed}
	\noindent \textbf{3.} Verwenden Sie nun die letzten beiden Methoden in dem teilweise vorgegebenen Skript \lstinline{exampleCaps.m}, um
die Kapazität der Kondensatorkonfigurationen a) bis d) der Vorbereitungsaufgaben numerisch zu berechnen und mit Ihren analytischen Ergebnissen zu vergleichen. Hängt die Lösung von der Größe des Gitters ab?\label{exer:calcCapNumerically}
\end{framed}

\emph{Fügen Sie hier Ihre Lösung ein}

% --> Aufgabe
\begin{framed}
	\noindent \textbf{4.} Visualisieren Sie im selben Skript das Potential (\lstinline{plotPotential}) und das elektrische Feld (\lstinline{plotEdgeVoltage})
der fünf Kondensatorkonfigurationen. Wählen Sie hierfür eine sinnvolle Diskretisierung und eine zweidimensionale Darstellung mit sinnvoller Schnittebene~\lstinline{indz}. Kommentieren Sie kurz die Feldbilder im Hinblick auf die analytischen Feldverläufe.\label{exer:visualizeCapField}
\end{framed}

\emph{Fügen Sie hier Ihre Lösung ein}

% --> Aufgabe
\begin{framed}
	\noindent \textbf{5.}   Dokumentieren Sie das Konvergenzverhalten des iterativen Solvers für Kondensatorkonfiguration~e), indem Sie
den Verlauf des relativen Residuums als Funktion des Iteratonsschritts $n_\text{iter}$ mithilfe eines Matlab-Skripts \lstinline{plotConv.m} grafisch darstellen.\\
{\textbf{Hinweis:}} Entsprechend Vorgabe ist das relative Residuum für jeden Iterationsschritt in \lstinline{relRes} enthalten.\label{exer:plotCapConvSolver}
\end{framed}
\noindent
Wie in Abb. \ref{fig:residiumiIterationen} zu erkennen nimmt das relative Residuum exponentiell mit der Anzahl der Iterationen ab. 
Beim relativen Residuum handelt es sich um die Differenz zwischen der $i$-ten und $(i-1)$-ten Iteration. 





% --> Aufgabe
\begin{framed}
	\noindent \textbf{6.} Schreiben Sie nun ein Skript \lstinline{plotConvCap.m}, das die letzte Kondensatorkonfiguration e) numerisch berechnet
und zusätzlich das Konvergenzverhalten (hier nicht vom Gleichungssystemlöser, sondern von der Gitterverfeinerung)
angibt. Stellen Sie auch diese Lösung wieder grafisch dar.\\
Welcher Unterschied besteht zwischen der Konvergenz des iterativen Solvers und der Verbesserung der Lösungsgenauigkeit durch zunehmende Gitterzellenanzahl, der sogenannten Verfahrenskonvergenz?\label{exer:plotCapConvMesh}
\end{framed}
\noindent
Durch eine Verfeinerung des Gitters kann, wie in Abb. \ref{fig:kapazitaetueberanzstuetzstellen} zu erkennen, eine Annäherung in Form einer Kehrwertfunktion $\frac{1}{np}$ erreicht werden. \\
Verglichen mit der exponentiellen Annäherung durch die Anzahl der Iterationsschritte, ist dies zwar deutlich langsamer, da aber die Iterationsschritte sich immer nur an die, durch die Anzahl der Stützstellen begrenzte, Genauigkeit annähern können, ist in der praktischen Anwendung eine Kombination aus beidem notwendig. 

%
{\subsection{Skalare Magnetostatik}}
Analog zur Elektrostatik wird nun ein Solver für magnetostatische Probleme implementiert, welcher das magnetische Skalarpotential verwendet. Das Rechengebiet wird erneut zu $1\times 1\times 1$ gewählt. In der Mitte des Rechengebietes soll sich ein in $z$-Richtung das komplette Rechengebiet durchlaufender Linienleiter, der den Strom \SI{1000}{A} führt, befinden.

% --> Aufgabe
\begin{framed}
	\noindent \textbf{7.} Verwenden Sie die vorgegebene Methode \lstinline{calcHi}, um das Hilfsfeld $\hfit_{\text{i}}$ des Linienleiters zu berechnen.
Stellen Sie es grafisch dar. Nutzen Sie für diese Implementierung bitte das gegebene Skript \lstinline{exampleHi.m}.\label{exer:visualizeHi}
\end{framed}

\emph{Fügen Sie hier Ihre Lösung ein}

% --> Aufgabe
\begin{framed}
	\noindent \textbf{8.} Vervollständigen Sie den Solver
\begin{align}
\lstinline{[hbow, bbow, relRes] = solveMS(msh, mu, jbow, bc)} \; ,
\end{align}
wobei \lstinline{mu} hier die Permeabilität, \lstinline{jbow} der Gitterstromfluss und
\lstinline{hbow} bzw. \lstinline{bbow} die Feldgrößen sind.\\
\ \\
{\textbf{Hinweis:}} Verwenden Sie wieder die vorgegebenen Routinen sowie die \matlab-Datei \lstinline{solveMS}. Benutzen Sie
dafür u.\,A. die Routine \lstinline{createMeps} und beachten Sie die vertauschte Allokation der Felder in der skalaren Magnetostatik.\label{exer:solveMS}
\end{framed}

\emph{Fügen Sie hier Ihre Lösung ein}

% --> Aufgabe
\begin{framed}
	\noindent \textbf{9.} Verwenden Sie \lstinline{solveMS} um das $\vec{H}$-Feld zu berechnen und grafisch darzustellen. Nutzen Sie für diese Implementierung bitte das Skript \lstinline{exampleMShomogen.m}. Entspricht das Feldbild Ihren Erwartungen?\label{exer:visualizeHfield}
\end{framed}

\emph{Fügen Sie hier Ihre Lösung ein}

% --> Aufgabe
\begin{framed}
	\noindent \textbf{10.} Wählen Sie ein einfaches (aber sinnvolles) Beispiel einer inhomogenen Materialverteilung. Verwenden Sie die vorhandenen Methoden, um das
Problem zu lösen und grafisch darzustellen. Nutzen Sie für diese Implementierung bitte das Skript \lstinline{exampleMSinhomogen.m}.\label{exer:Hfield4inhomogenMaterial}
\end{framed}

\emph{Fügen Sie hier Ihre Lösung ein}



\section{Fazit}
\emph{Fügen Sie hier Ihre Lösung ein}

\clearpage
\newpage
\section{Abbildungen}
\begin{figure}[h!]
	\centering
	\includegraphics[width=0.7\linewidth]{ResidiumIterationenGraph.pdf}
	\caption{Verlauf des relativen Residuums für einen iterativen Solvers über der Anzahl der Iterationsschritte am Beispiel der Berechnung eines Kondensators}
	\label{fig:residiumiIterationen}
\end{figure}

\begin{figure}[h!]
	\centering
	\includegraphics[width=0.7\linewidth]{KapazitaetUeberAnzStuetzstellen.pdf}
	\caption{Nummerisch bestimmte Kapazität eines Kondensators in Abhängigkeit von der Anzahl der Stützstellen}
	\label{fig:kapazitaetueberanzstuetzstellen}
\end{figure}

\end{document}
